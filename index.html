<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π –¢—Ä–∏—É–º–≤–∏—Ä–∞—Ç</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .screen {
            display: none;
        }
        
        .active {
            display: block;
        }
        
        .player-setup {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }
        
        input, select, button {
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
        }
        
        button {
            background: #ff6b6b;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        button:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .betting-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .option {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        
        .slider-container {
            margin: 10px 0;
        }
        
        .points-display {
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
        }
        
        .host-interface {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .results {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .score-board {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .player-score {
            text-align: center;
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            min-width: 150px;
        }
        
        .code-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: monospace;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ –¢—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π –¢—Ä–∏—É–º–≤–∏—Ä–∞—Ç</h1>
        
        <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã -->
        <div id="setupScreen" class="screen active">
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–≥—Ä—ã</h2>
            <div class="player-setup">
                <input type="text" id="playerName" placeholder="–í–∞—à–µ –∏–º—è">
                <select id="playerRole">
                    <option value="player1">–ò–≥—Ä–æ–∫ 1</option>
                    <option value="player2">–ò–≥—Ä–æ–∫ 2</option>
                    <option value="player3">–ò–≥—Ä–æ–∫ 3</option>
                </select>
                <button onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
        <div id="gameScreen" class="screen">
            <div class="game-info">
                <h2>–†–∞—É–Ω–¥ <span id="roundNumber">1</span></h2>
                <p>–í–µ–¥—É—â–∏–π: <span id="hostName">-</span></p>
                <p>–í–∞—à–∞ —Ä–æ–ª—å: <span id="currentRole">-</span></p>
            </div>
            
            <div id="questionSection">
                <h3 id="questionText">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞...</h3>
                
                <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–≤–µ—á–∞—é—â–∏—Ö -->
                <div id="answeringInterface">
                    <div class="points-display">–û—á–∫–æ–≤ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: <span id="pointsLeft">100</span></div>
                    <div id="bettingOptions" class="betting-interface">
                        <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                    <button onclick="submitAnswer()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                </div>
                
                <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ -->
                <div id="hostInterface" class="host-interface">
                    <h3>–í–∞—à –ø—Ä–æ–≥–Ω–æ–∑:</h3>
                    <div id="hostPredictions">
                        <!-- –ü—Ä–æ–≥–Ω–æ–∑—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                    <button onclick="submitHostPrediction()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑</button>
                </div>
            </div>
            
            <div class="score-board">
                <div class="player-score">
                    <div id="player1Name">–ò–≥—Ä–æ–∫ 1</div>
                    <div id="player1Score">0</div>
                </div>
                <div class="player-score">
                    <div id="player2Name">–ò–≥—Ä–æ–∫ 2</div>
                    <div id="player2Score">0</div>
                </div>
                <div class="player-score">
                    <div id="player3Name">–ò–≥—Ä–æ–∫ 3</div>
                    <div id="player3Score">0</div>
                </div>
            </div>
            
            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–æ–¥–∞–º–∏ -->
            <div id="codeExchangeSection" class="results">
                <h3>–û–±–º–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏</h3>
                <p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º:</p>
                <div class="code-section" id="myCode"></div>
                
                <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥—ã –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤:</p>
                <input type="text" id="codeInput1" placeholder="–ö–æ–¥ –∏–≥—Ä–æ–∫–∞ 1">
                <input type="text" id="codeInput2" placeholder="–ö–æ–¥ –∏–≥—Ä–æ–∫–∞ 2">
                <button onclick="processCodes()">–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–¥—ã</button>
            </div>
            
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—É–Ω–¥–∞ -->
            <div id="resultsSection" class="results">
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—É–Ω–¥–∞</h3>
                <div id="roundResults"></div>
                <button onclick="nextRound()">–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥</button>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let gameState = {
            players: {},
            currentRound: 1,
            scores: { player1: 0, player2: 0, player3: 0 },
            currentQuestion: null,
            playerAnswers: {},
            hostPredictions: {},
            playerRole: '',
            playerName: ''
        };

        // –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–≥—Ä—ã
        const questions = [
            {
                question: "–ö–∞–∫–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–º–µ–µ—Ç –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤?",
                options: ["–Æ–ø–∏—Ç–µ—Ä", "–°–∞—Ç—É—Ä–Ω", "–£—Ä–∞–Ω", "–ù–µ–ø—Ç—É–Ω"],
                correctAnswer: 1 // –°–∞—Ç—É—Ä–Ω
            },
            {
                question: "–í –∫–∞–∫–æ–º –≥–æ–¥—É –ø—Ä–æ–∏–∑–æ—à–ª–∞ –í–µ–ª–∏–∫–∞—è –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è —Å–æ—Ü–∏–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≤–æ–ª—é—Ü–∏—è?",
                options: ["1905", "1917", "1922", "1937"],
                correctAnswer: 1 // 1917
            },
            {
                question: "–ö—Ç–æ –Ω–∞–ø–∏—Å–∞–ª —Ä–æ–º–∞–Ω '–ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞'?",
                options: ["–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π", "–ú–∏—Ö–∞–∏–ª –ë—É–ª–≥–∞–∫–æ–≤", "–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π", "–ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤"],
                correctAnswer: 1 // –ë—É–ª–≥–∞–∫–æ–≤
            },
            {
                question: "–ö–∞–∫–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ —è–≤–ª—è–µ—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º –ê–≤—Å—Ç—Ä–∞–ª–∏–∏?",
                options: ["–ö–µ–Ω–≥—É—Ä—É", "–ö–æ–∞–ª–∞", "–£—Ç–∫–æ–Ω–æ—Å", "–≠–º—É"],
                correctAnswer: 0 // –ö–µ–Ω–≥—É—Ä—É
            },
            {
                question: "–ö–∞–∫–æ–π —Ö–∏–º–∏—á–µ—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º 'Au'?",
                options: ["–°–µ—Ä–µ–±—Ä–æ", "–ñ–µ–ª–µ–∑–æ", "–ó–æ–ª–æ—Ç–æ", "–ê–ª—é–º–∏–Ω–∏–π"],
                correctAnswer: 2 // –ó–æ–ª–æ—Ç–æ
            },
            {
                question: "–í –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–µ –ø–æ—è–≤–∏–ª—Å—è –ø–µ—Ä–≤—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç?",
                options: ["–ò—Ç–∞–ª–∏—è", "–ì—Ä–µ—Ü–∏—è", "–ú–∞—Ä–æ–∫–∫–æ", "–ö–∏—Ç–∞–π"],
                correctAnswer: 2 // –ú–∞—Ä–æ–∫–∫–æ (–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ê–ª—å-–ö–∞—Ä–∞—É–∏–Ω, 859 –≥.)
            },
            {
                question: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è –ø—É—Å—Ç—ã–Ω—è –≤ –º–∏—Ä–µ?",
                options: ["–°–∞—Ö–∞—Ä–∞", "–ì–æ–±–∏", "–ê–Ω—Ç–∞—Ä–∫—Ç–∏—á–µ—Å–∫–∞—è –ø—É—Å—Ç—ã–Ω—è", "–ê—Ä–∞–≤–∏–π—Å–∫–∞—è –ø—É—Å—Ç—ã–Ω—è"],
                correctAnswer: 2 // –ê–Ω—Ç–∞—Ä–∫—Ç–∏—á–µ—Å–∫–∞—è –ø—É—Å—Ç—ã–Ω—è
            },
            {
                question: "–ö—Ç–æ –∏–∑–æ–±—Ä–µ–ª —Ç–µ–ª–µ—Ñ–æ–Ω?",
                options: ["–¢–æ–º–∞—Å –≠–¥–∏—Å–æ–Ω", "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ì—Ä—ç—Ö–µ–º –ë–µ–ª–ª", "–ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞", "–ì—É–ª—å–µ–ª—å–º–æ –ú–∞—Ä–∫–æ–Ω–∏"],
                correctAnswer: 1 // –ë–µ–ª–ª
            },
            {
                question: "–ö–∞–∫–æ–µ –≤–µ—â–µ—Å—Ç–≤–æ —è–≤–ª—è–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –∑–µ–º–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã?",
                options: ["–ö–∏—Å–ª–æ—Ä–æ–¥", "–ê–∑–æ—Ç", "–£–≥–ª–µ–∫–∏—Å–ª—ã–π –≥–∞–∑", "–ê—Ä–≥–æ–Ω"],
                correctAnswer: 1 // –ê–∑–æ—Ç
            }
        ];

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            gameState.playerName = document.getElementById('playerName').value || '–ê–Ω–æ–Ω–∏–º';
            gameState.playerRole = document.getElementById('playerRole').value;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤
            gameState.players = {
                player1: gameState.playerRole === 'player1' ? gameState.playerName : '–ò–≥—Ä–æ–∫ 1',
                player2: gameState.playerRole === 'player2' ? gameState.playerName : '–ò–≥—Ä–æ–∫ 2', 
                player3: gameState.playerRole === 'player3' ? gameState.playerName : '–ò–≥—Ä–æ–∫ 3'
            };
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            document.getElementById('player1Name').textContent = gameState.players.player1;
            document.getElementById('player2Name').textContent = gameState.players.player2;
            document.getElementById('player3Name').textContent = gameState.players.player3;
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã
            document.getElementById('setupScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.add('active');
            
            // –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞
            startRound();
        }

        // –ù–∞—á–∞–ª–æ —Ä–∞—É–Ω–¥–∞
        function startRound() {
            // –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö —Ä–∞—É–Ω–¥–∞
            gameState.playerAnswers = {};
            gameState.hostPredictions = {};
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ
            const hostIndex = (gameState.currentRound - 1) % 3;
            const hostRole = `player${hostIndex + 1}`;
            const hostName = gameState.players[hostRole];
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞—É–Ω–¥–µ
            document.getElementById('roundNumber').textContent = gameState.currentRound;
            document.getElementById('hostName').textContent = hostName;
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
            const isHost = gameState.playerRole === hostRole;
            document.getElementById('currentRole').textContent = isHost ? '–í–µ–¥—É—â–∏–π' : '–û—Ç–≤–µ—á–∞—é—â–∏–π';
            
            // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
            document.getElementById('answeringInterface').style.display = isHost ? 'none' : 'block';
            document.getElementById('hostInterface').style.display = isHost ? 'block' : 'none';
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
            const questionIndex = (gameState.currentRound - 1) % questions.length;
            gameState.currentQuestion = questions[questionIndex];
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
            document.getElementById('questionText').textContent = gameState.currentQuestion.question;
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Å—Ç–∞–≤–æ–∫
            if (!isHost) {
                createBettingInterface();
            } else {
                createHostInterface();
            }
            
            // –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –∫–æ–¥–æ–≤ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞—É–Ω–¥–∞
            document.getElementById('codeExchangeSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'none';
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Å—Ç–∞–≤–æ–∫
        function createBettingInterface() {
            const bettingOptions = document.getElementById('bettingOptions');
            bettingOptions.innerHTML = '';
            
            gameState.currentQuestion.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div>${String.fromCharCode(65 + index)}) ${option}</div>
                    <div class="slider-container">
                        <input type="range" min="0" max="100" value="0" class="bet-slider" data-option="${index}">
                        <span class="slider-value">0</span> –æ—á–∫–æ–≤
                    </div>
                `;
                bettingOptions.appendChild(optionElement);
            });
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–æ–≤
            const sliders = document.querySelectorAll('.bet-slider');
            sliders.forEach(slider => {
                slider.addEventListener('input', updatePointsDisplay);
            });
            
            updatePointsDisplay();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—á–∫–æ–≤
        function updatePointsDisplay() {
            const sliders = document.querySelectorAll('.bet-slider');
            let totalPoints = 0;
            
            sliders.forEach(slider => {
                const value = parseInt(slider.value);
                totalPoints += value;
                slider.nextElementSibling.textContent = value;
            });
            
            document.getElementById('pointsLeft').textContent = 100 - totalPoints;
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–ª–∞–π–¥–µ—Ä–æ–≤ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
            const limitReached = totalPoints >= 100;
            sliders.forEach(slider => {
                if (limitReached && parseInt(slider.value) === 0) {
                    slider.disabled = true;
                } else {
                    slider.disabled = false;
                }
            });
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ
        function createHostInterface() {
            const hostPredictions = document.getElementById('hostPredictions');
            hostPredictions.innerHTML = '';
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞—é—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
            const answeringPlayers = Object.keys(gameState.players).filter(
                player => player !== gameState.playerRole
            );
            
            answeringPlayers.forEach(player => {
                const playerElement = document.createElement('div');
                playerElement.className = 'option';
                playerElement.innerHTML = `
                    <div>${gameState.players[player]}</div>
                    <select class="host-prediction" data-player="${player}">
                        <option value="0">A) ${gameState.currentQuestion.options[0]}</option>
                        <option value="1">B) ${gameState.currentQuestion.options[1]}</option>
                        <option value="2">C) ${gameState.currentQuestion.options[2]}</option>
                        <option value="3">D) ${gameState.currentQuestion.options[3]}</option>
                    </select>
                `;
                hostPredictions.appendChild(playerElement);
            });
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
        function submitAnswer() {
            const sliders = document.querySelectorAll('.bet-slider');
            const bets = {};
            let totalPoints = 0;
            
            sliders.forEach(slider => {
                const option = parseInt(slider.dataset.option);
                const points = parseInt(slider.value);
                bets[option] = points;
                totalPoints += points;
            });
            
            if (totalPoints !== 100) {
                alert('–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–æ–≤–Ω–æ 100 –æ—á–∫–æ–≤!');
                return;
            }
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
            gameState.playerAnswers[gameState.playerRole] = bets;
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –¥–ª—è –æ–±–º–µ–Ω–∞
            generateCode();
            
            // –ü–æ–∫–∞–∑ —Å–µ–∫—Ü–∏–∏ –æ–±–º–µ–Ω–∞ –∫–æ–¥–∞–º–∏
            document.getElementById('codeExchangeSection').style.display = 'block';
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ –≤–µ–¥—É—â–µ–≥–æ
        function submitHostPrediction() {
            const predictions = {};
            const predictionSelects = document.querySelectorAll('.host-prediction');
            
            predictionSelects.forEach(select => {
                const player = select.dataset.player;
                const prediction = parseInt(select.value);
                predictions[player] = prediction;
            });
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
            gameState.hostPredictions = predictions;
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –¥–ª—è –æ–±–º–µ–Ω–∞
            generateCode();
            
            // –ü–æ–∫–∞–∑ —Å–µ–∫—Ü–∏–∏ –æ–±–º–µ–Ω–∞ –∫–æ–¥–∞–º–∏
            document.getElementById('codeExchangeSection').style.display = 'block';
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –¥–ª—è –æ–±–º–µ–Ω–∞
        function generateCode() {
            const codeData = {
                player: gameState.playerRole,
                round: gameState.currentRound,
                answers: gameState.playerAnswers[gameState.playerRole],
                predictions: gameState.hostPredictions
            };
            
            const codeString = JSON.stringify(codeData);
            const code = btoa(encodeURIComponent(codeString));
            document.getElementById('myCode').textContent = code;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–æ–≤
        function processCodes() {
            const code1 = document.getElementById('codeInput1').value;
            const code2 = document.getElementById('codeInput2').value;
            
            if (!code1 || !code2) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥—ã –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤!');
                return;
            }
            
            try {
                // –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–æ–≤
                const decoded1 = JSON.parse(decodeURIComponent(atob(code1)));
                const decoded2 = JSON.parse(decodeURIComponent(atob(code2)));
                
                // –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
                [decoded1, decoded2].forEach(data => {
                    if (data.answers) {
                        gameState.playerAnswers[data.player] = data.answers;
                    }
                    if (data.predictions) {
                        Object.assign(gameState.hostPredictions, data.predictions);
                    }
                });
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
                const currentHost = `player${(gameState.currentRound - 1) % 3 + 1}`;
                const answeringPlayers = Object.keys(gameState.players).filter(p => p !== currentHost);
                
                if (answeringPlayers.every(p => gameState.playerAnswers[p]) && 
                    Object.keys(gameState.hostPredictions).length === 2) {
                    calculateRoundResults();
                } else {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤!');
                }
                
            } catch (e) {
                alert('–û—à–∏–±–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–æ–¥–æ–≤!');
                console.error(e);
            }
        }

        // –ü–æ–¥—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—É–Ω–¥–∞
        function calculateRoundResults() {
            const correctAnswer = gameState.currentQuestion.correctAnswer;
            const currentHost = `player${(gameState.currentRound - 1) % 3 + 1}`;
            const answeringPlayers = Object.keys(gameState.players).filter(p => p !== currentHost);
            
            let resultsHTML = '<ul>';
            
            // –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤ –¥–ª—è –æ—Ç–≤–µ—á–∞—é—â–∏—Ö
            answeringPlayers.forEach(player => {
                const bets = gameState.playerAnswers[player];
                const pointsEarned = bets[correctAnswer] || 0;
                
                gameState.scores[player] += pointsEarned;
                
                resultsHTML += `<li>${gameState.players[player]}: ${pointsEarned} –æ—á–∫–æ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</li>`;
            });
            
            // –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ
            let hostPoints = 0;
            answeringPlayers.forEach(player => {
                const playerBets = gameState.playerAnswers[player];
                const playerPrediction = gameState.hostPredictions[player];
                
                // –ù–∞—Ö–æ–¥–∏–º –≤–∞—Ä–∏–∞–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∏–≥—Ä–æ–∫ –ø–æ—Å—Ç–∞–≤–∏–ª –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ
                let maxBetOption = 0;
                let maxBetValue = 0;
                Object.keys(playerBets).forEach(option => {
                    if (playerBets[option] > maxBetValue) {
                        maxBetValue = playerBets[option];
                        maxBetOption = parseInt(option);
                    }
                });
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É–≥–∞–¥–∞–ª –ª–∏ –≤–µ–¥—É—â–∏–π
                if (playerPrediction === maxBetOption) {
                    const playerPoints = playerBets[correctAnswer] || 0;
                    const hostShare = Math.floor(playerPoints * 0.25);
                    hostPoints += hostShare;
                    
                    resultsHTML += `<li>–í–µ–¥—É—â–∏–π —É–≥–∞–¥–∞–ª —Å—Ç–∞–≤–∫—É ${gameState.players[player]} –∏ –ø–æ–ª—É—á–∞–µ—Ç ${hostShare} –æ—á–∫–æ–≤</li>`;
                } else {
                    resultsHTML += `<li>–í–µ–¥—É—â–∏–π –Ω–µ —É–≥–∞–¥–∞–ª —Å—Ç–∞–≤–∫—É ${gameState.players[player]}</li>`;
                }
            });
            
            gameState.scores[currentHost] += hostPoints;
            resultsHTML += `</ul>`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
            document.getElementById('player1Score').textContent = gameState.scores.player1;
            document.getElementById('player2Score').textContent = gameState.scores.player2;
            document.getElementById('player3Score').textContent = gameState.scores.player3;
            
            // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('roundResults').innerHTML = resultsHTML;
            document.getElementById('resultsSection').style.display = 'block';
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞—É–Ω–¥—É
        function nextRound() {
            gameState.currentRound++;
            
            if (gameState.currentRound > 9) {
                endGame();
            } else {
                startRound();
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        function endGame() {
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
            let winner = 'player1';
            let maxScore = gameState.scores.player1;
            
            if (gameState.scores.player2 > maxScore) {
                winner = 'player2';
                maxScore = gameState.scores.player2;
            }
            if (gameState.scores.player3 > maxScore) {
                winner = 'player3';
            }
            
            alert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: ${gameState.players[winner]} —Å ${gameState.scores[winner]} –æ—á–∫–∞–º–∏!`);
            
            // –°–±—Ä–æ—Å –∏–≥—Ä—ã
            gameState.currentRound = 1;
            gameState.scores = { player1: 0, player2: 0, player3: 0 };
            startRound();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–º–µ–Ω –∏–≥—Ä–æ–∫–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            document.getElementById('playerName').value = '–ò–≥—Ä–æ–∫ ' + (Math.floor(Math.random() * 3) + 1);
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Экзистенциальный опыт</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            font-family: 'Times New Roman', serif;
            cursor: none;
            position: relative;
        }
        
        .text-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.8;
            mix-blend-mode: screen;
        }
        
        .floating-text {
            position: absolute;
            font-size: 24px;
            color: rgba(255, 255, 255, 0.7);
            white-space: nowrap;
            animation: float 30s linear infinite;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            pointer-events: auto;
            cursor: pointer;
            z-index: 100;
        }
        
        .floating-text:hover {
            color: #ff5555;
            text-shadow: 0 0 15px #ff0000;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
            }
            100% {
                transform: translateY(-100%) translateX(calc(100vw - 100%));
            }
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 2s ease;
        }
        
        .overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .question-box {
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 80%;
            text-align: center;
            box-shadow: 0 0 50px rgba(100, 100, 255, 0.5);
        }
        
        .question {
            font-size: 28px;
            margin-bottom: 25px;
            line-height: 1.4;
        }
        
        .options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .option {
            padding: 12px 24px;
            background: rgba(50, 50, 150, 0.3);
            border: 1px solid rgba(100, 100, 255, 0.5);
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option:hover {
            background: rgba(70, 70, 200, 0.5);
            transform: scale(1.05);
        }
        
        .glitch-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .glitch-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0.7;
        }
        
        .counter {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 24px;
            font-family: monospace;
            color: #0f0;
            text-shadow: 0 0 10px #0f0;
            z-index: 200;
        }
        
        .hidden-element {
            position: absolute;
            width: 30px;
            height: 30px;
            background: transparent;
            z-index: 150;
            cursor: pointer;
        }
        
        .pulse {
            animation: pulse 3s infinite alternate;
        }
        
        @keyframes pulse {
            0% { opacity: 0.2; }
            100% { opacity: 0.8; }
        }
        
        .flicker {
            animation: flicker 5s infinite alternate;
        }
        
        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                opacity: 1;
            }
            20%, 24%, 55% {
                opacity: 0;
            }
        }
        
        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 250 250' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.05;
            z-index: 10;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="noise"></div>
    <div class="text-layer" id="text-layer"></div>
    <div class="glitch-container" id="glitch-container">
        <div class="glitch-layer" id="glitch-layer-1"></div>
        <div class="glitch-layer" id="glitch-layer-2"></div>
        <div class="glitch-layer" id="glitch-layer-3"></div>
    </div>
    
    <div class="overlay" id="overlay">
        <div class="question-box">
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
        </div>
    </div>
    
    <div class="counter" id="counter">0000</div>

    <audio id="bgMusic" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-ambient-basic-loop-315.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="glitchSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-glitch-static-568.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="clickSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Конфигурация
        const CONFIG = {
            textPool: [
                "Что есть реальность?",
                "Существуем ли мы вне восприятия?",
                "Всё уже предопределено?",
                "Свобода воли - иллюзия?",
                "42",
                "Смысл бытия ускользает",
                "Мы лишь сновидение кого-то другого",
                "Время - это река без берегов",
                "Я мыслю, следовательно, я существую?",
                "За гранью понимания",
                "Всё тленно, ничто не вечно",
                "Бытие определяет сознание",
                "Случайность или закономерность?",
                "Познаваем ли мир?",
                "В начале было Слово",
                "Бог мёртв",
                "Экзистенциальная тревога",
                "Абсурд бытия",
                "Зачем?",
                "Ничто не истина, всё permitted"
            ],
            images: [
                "https://images.unsplash.com/photo-1536240478700-b869070f9279?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1516545595035-b494dd0161e4?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1505506874110-6a7a69069a08?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1526281216101-0c10d5d789b3?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1465158753225-0c6f6365c6a5?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
            ],
            questions: [
                {
                    text: "Существуем ли мы вне чьего-либо восприятия?",
                    options: [
                        "Бытие не зависит от наблюдателя",
                        "Реальность создаётся через наблюдение",
                        "Мы существуем только в сознании Бога",
                        "Вопрос бессмысленен"
                    ]
                },
                {
                    text: "Свобода воли - это иллюзия?",
                    options: [
                        "Да, всё предопределено",
                        "Нет, мы делаем настоящий выбор",
                        "Свобода воли относительна",
                        "Неважно, иллюзия или нет"
                    ]
                },
                {
                    text: "В чём смысл существования?",
                    options: [
                        "В поиске удовольствий",
                        "В служении высшей цели",
                        "Смысла не существует",
                        "Смысл в том, чтобы создавать смысл"
                    ]
                },
                {
                    text: "Сознание - это продукт мозга или нечто отдельное?",
                    options: [
                        "Продукт нейронной активности",
                        "Сознание фундаментально и независимо",
                        "Сознание - иллюзия",
                        "Непостижимо для человеческого разума"
                    ]
                },
                {
                    text: "Существует ли объективная мораль?",
                    options: [
                        "Да, моральные законы универсальны",
                        "Нет, мораль относительна",
                        "Мораль - социальный конструкт",
                        "Мораль определяется последствиями"
                    ]
                }
            ],
            externalLinks: [
                "https://ru.wikipedia.org/wiki/Солипсизм",
                "https://ru.wikipedia.org/wiki/Экзистенциализм",
                "https://ru.wikipedia.org/wiki/Теория_симуляции",
                "https://ru.wikipedia.org/wiki/Философский_зомби",
                "https://ru.wikipedia.org/wiki/Нигилизм",
                "https://plato.stanford.edu/entries/time/",
                "https://www.britannica.com/topic/consciousness",
                "https://iep.utm.edu/freedom/",
                "https://www.youtube.com/watch?v=WO2X3oZEJuo",
                "https://www.youtube.com/watch?v=4V2RgQeUCBU"
            ]
        };
        
        // Состояние
        let state = {
            existentialLevel: 0,
            interactionCount: 0,
            hiddenParameter: Math.floor(Math.random() * 100),
            glitchMode: false,
            activeTexts: [],
            currentQuestion: null
        };
        
        // Элементы DOM
        const textLayer = document.getElementById('text-layer');
        const glitchContainer = document.getElementById('glitch-container');
        const overlay = document.getElementById('overlay');
        const questionEl = document.getElementById('question');
        const optionsEl = document.getElementById('options');
        const counterEl = document.getElementById('counter');
        const bgMusic = document.getElementById('bgMusic');
        const glitchSound = document.getElementById('glitchSound');
        const clickSound = document.getElementById('clickSound');
        
        // Инициализация
        function init() {
            createFloatingTexts();
            createHiddenElements();
            setupGlitchLayers();
            playMusic();
            
            // Периодические эффекты
            setInterval(updateCounter, 30000);
            setInterval(addFloatingText, 10000);
            setInterval(randomGlitch, 15000);
            setInterval(showRandomQuestion, 60000);
            
            // Обработчики событий
            document.addEventListener('click', handleRandomEffect);
            document.addEventListener('touchstart', handleTouch, { passive: false });
            
            // Случайные изменения фона
            setInterval(changeBackground, 20000);
            
            // Начальный вопрос
            setTimeout(showRandomQuestion, 5000);
        }
        
        // Создание плавающих текстов
        function createFloatingTexts() {
            for (let i = 0; i < 10; i++) {
                addFloatingText();
            }
        }
        
        // Добавление нового плавающего текста
        function addFloatingText() {
            const text = CONFIG.textPool[Math.floor(Math.random() * CONFIG.textPool.length)];
            const textEl = document.createElement('div');
            textEl.className = 'floating-text';
            textEl.textContent = text;
            textEl.style.top = `${Math.random() * 100}%`;
            textEl.style.left = `${Math.random() * 100}%`;
            textEl.style.animationDuration = `${20 + Math.random() * 30}s`;
            textEl.style.fontSize = `${16 + Math.random() * 24}px`;
            textEl.style.color = `hsl(${Math.random() * 360}, 70%, 70%)`;
            
            textEl.addEventListener('click', () => {
                handleTextClick(textEl);
            });
            
            textLayer.appendChild(textEl);
            state.activeTexts.push(textEl);
            
            // Ограничение количества текстов
            if (state.activeTexts.length > 20) {
                const toRemove = state.activeTexts.shift();
                toRemove.remove();
            }
        }
        
        // Обработка клика на текст
        function handleTextClick(textEl) {
            playSound(clickSound);
            state.interactionCount++;
            
            // Случайные эффекты при клике
            if (Math.random() > 0.7) {
                triggerGlitch();
            }
            
            if (Math.random() > 0.8) {
                redirectToRandomSite();
            }
            
            // Изменение текста
            if (Math.random() > 0.5) {
                textEl.textContent = CONFIG.textPool[Math.floor(Math.random() * CONFIG.textPool.length)];
                textEl.style.color = `hsl(${Math.random() * 360}, 70%, 70%)`;
            }
            
            updateCounter();
        }
        
        // Создание скрытых интерактивных элементов
        function createHiddenElements() {
            for (let i = 0; i < 7; i++) {
                const hiddenEl = document.createElement('div');
                hiddenEl.className = 'hidden-element';
                hiddenEl.style.top = `${Math.random() * 90}%`;
                hiddenEl.style.left = `${Math.random() * 90}%`;
                
                if (Math.random() > 0.5) {
                    hiddenEl.classList.add('pulse');
                } else {
                    hiddenEl.classList.add('flicker');
                }
                
                hiddenEl.addEventListener('click', () => {
                    handleHiddenElementClick(hiddenEl);
                });
                
                document.body.appendChild(hiddenEl);
            }
        }
        
        // Обработка клика на скрытый элемент
        function handleHiddenElementClick(el) {
            state.existentialLevel++;
            playSound(glitchSound);
            
            // Случайный эффект
            triggerGlitch();
            
            // Перемещение элемента
            el.style.top = `${Math.random() * 90}%`;
            el.style.left = `${Math.random() * 90}%`;
            
            // Случайное изменение счетчика
            state.interactionCount += Math.floor(Math.random() * 100);
            updateCounter();
        }
        
        // Настройка слоев глитча
        function setupGlitchLayers() {
            const layers = [
                document.getElementById('glitch-layer-1'),
                document.getElementById('glitch-layer-2'),
                document.getElementById('glitch-layer-3')
            ];
            
            layers.forEach(layer => {
                layer.style.backgroundImage = `url(${CONFIG.images[Math.floor(Math.random() * CONFIG.images.length)]})`;
                layer.style.mixBlendMode = ['screen', 'overlay', 'lighten'][Math.floor(Math.random() * 3)];
                layer.style.opacity = Math.random() * 0.5;
            });
        }
        
        // Случайный глитч-эффект
        function randomGlitch() {
            if (Math.random() > 0.6) {
                triggerGlitch();
            }
        }
        
        // Запуск эффекта глитча
        function triggerGlitch() {
            playSound(glitchSound);
            
            // Визуальный глитч
            glitchContainer.style.opacity = 1;
            
            // Случайное изменение фона слоев
            const layers = [
                document.getElementById('glitch-layer-1'),
                document.getElementById('glitch-layer-2'),
                document.getElementById('glitch-layer-3')
            ];
            
            layers.forEach(layer => {
                if (Math.random() > 0.5) {
                    layer.style.backgroundImage = `url(${CONFIG.images[Math.floor(Math.random() * CONFIG.images.length)]})`;
                    layer.style.mixBlendMode = ['screen', 'overlay', 'lighten', 'difference'][Math.floor(Math.random() * 4)];
                }
                
                layer.style.opacity = 0.2 + Math.random() * 0.5;
            });
            
            setTimeout(() => {
                glitchContainer.style.opacity = 0;
            }, 200 + Math.random() * 1000);
        }
        
        // Показать случайный вопрос
        function showRandomQuestion() {
            if (Math.random() > 0.3 && !overlay.classList.contains('active')) {
                const question = CONFIG.questions[Math.floor(Math.random() * CONFIG.questions.length)];
                state.currentQuestion = question;
                
                questionEl.textContent = question.text;
                
                // Очистка опций
                optionsEl.innerHTML = '';
                
                // Добавление новых опций (в случайном порядке)
                const shuffledOptions = [...question.options];
                shuffleArray(shuffledOptions);
                
                shuffledOptions.forEach(opt => {
                    const button = document.createElement('button');
                    button.className = 'option';
                    button.textContent = opt;
                    
                    button.addEventListener('click', () => {
                        handleAnswerClick();
                    });
                    
                    optionsEl.appendChild(button);
                });
                
                // Показать overlay
                overlay.classList.add('active');
                
                // Автоматическое скрытие через некоторое время
                setTimeout(() => {
                    overlay.classList.remove('active');
                }, 10000 + Math.random() * 15000);
            }
        }
        
        // Обработка выбора ответа
        function handleAnswerClick() {
            playSound(clickSound);
            state.interactionCount++;
            
            // Скрыть overlay
            overlay.classList.remove('active');
            
            // Случайные эффекты после ответа
            if (Math.random() > 0.7) {
                triggerGlitch();
            }
            
            if (Math.random() > 0.9) {
                redirectToRandomSite();
            }
            
            updateCounter();
            
            // Показать новый вопрос через некоторое время
            setTimeout(showRandomQuestion, 5000 + Math.random() * 15000);
        }
        
        // Обновление счетчика
        function updateCounter() {
            state.interactionCount += Math.floor(Math.random() * 7);
            const countStr = state.interactionCount.toString().padStart(4, '0');
            counterEl.textContent = countStr;
            
            // Случайное изменение цвета счетчика
            if (Math.random() > 0.8) {
                counterEl.style.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
                setTimeout(() => {
                    counterEl.style.color = '#0f0';
                }, 3000);
            }
        }
        
        // Изменение фона
        function changeBackground() {
            if (Math.random() > 0.7) {
                document.body.style.backgroundColor = `hsl(${Math.random() * 360}, 30%, 10%)`;
                setTimeout(() => {
                    document.body.style.backgroundColor = '#000';
                }, 5000);
            }
        }
        
        // Обработка касаний
        function handleTouch(e) {
            // Случайный эффект при касании
            if (Math.random() > 0.7) {
                document.body.style.backgroundColor = `hsl(${Math.random() * 360}, 50%, 20%)`;
                setTimeout(() => {
                    document.body.style.backgroundColor = '#000';
                }, 1000);
            }
            
            // Случайное воспроизведение звука
            if (Math.random() > 0.8) {
                playSound(glitchSound);
            }
        }
        
        // Случайные эффекты при клике
        function handleRandomEffect(e) {
            if (e.target.className !== 'option' && e.target.className !== 'floating-text' && 
                e.target.className !== 'hidden-element' && Math.random() > 0.8) {
                triggerGlitch();
                state.interactionCount++;
                updateCounter();
            }
        }
        
        // Перенаправление на случайный сайт
        function redirectToRandomSite() {
            if (Math.random() > 0.7) {
                setTimeout(() => {
                    window.open(CONFIG.externalLinks[Math.floor(Math.random() * CONFIG.externalLinks.length)], '_blank');
                }, 1000);
            }
        }
        
        // Воспроизведение музыки
        function playMusic() {
            bgMusic.volume = 0.3;
            bgMusic.play().catch(e => {
                console.log("Автовоспроизведение заблокировано. Для полного опыта разрешите звук.");
            });
            
            // Случайные изменения громкости
            setInterval(() => {
                if (Math.random() > 0.8) {
                    bgMusic.volume = Math.random() * 0.5;
                    setTimeout(() => {
                        bgMusic.volume = 0.3;
                    }, 3000);
                }
            }, 10000);
        }
        
        // Воспроизведение звука
        function playSound(sound) {
            sound.currentTime = 0;
            sound.volume = 0.7;
            sound.play().catch(e => console.log("Не удалось воспроизвести звук"));
        }
        
        // Перемешать массив
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Запуск при загрузке
        window.addEventListener('load', init);
    </script>
</body>
</html>
